Modified from https://github.com/MikeLankamp/fpm (retrieved 12/22/2022)